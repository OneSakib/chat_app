{% extends 'base.html' %}
{% block content %}
  <div class="container">
    <h6>Hello, {{ request.user }}</h6>
    <h6>Your Conversions</h6>
    <hr />
    {% for conversion in conversions %}
      <div>
        <a class="link" href="{% url 'chat_room' conversion.id %}">{{ conversion }}</a>
      </div>
    {% endfor %}
    <hr />
    {% comment %}What chat room would you like to enter?<br />
    <input id="room-name-input" type="text" size="100" /><br />
    <input id="room-name-submit" type="button" value="Enter" /> {% endcomment %}
  </div>
{% endblock %}
{% block script %}
  <script>
    document.querySelector('#room-name-input').focus()
    document.querySelector('#room-name-input').onkeyup = function (e) {
      if (e.key === 'Enter') {
        // enter, return
        document.querySelector('#room-name-submit').click()
      }
    }
    document.querySelector('#room-name-submit').onclick = function (e) {
      var roomName = document.querySelector('#room-name-input').value
      window.location.pathname = '/chat/' + roomName
    }
  </script>
{% endblock %}
